import streamlit as st
import requests
from bs4 import BeautifulSoup
from streamlit import components

# Function to scrape news from Yahoo Finance
def fetch_yahoo_finance_news():
    url = "https://finance.yahoo.com/"
    response = requests.get(url)
    soup = BeautifulSoup(response.content, 'html.parser')

    headlines = []
    for item in soup.find_all('h3', {'class': lambda x: x and 'Mb(5px)' in x}):
        text = item.get_text()
        if text:
            headlines.append(text)

    return headlines[:5]  # Return top 5 headlines

# Web App Title
st.title("Dynamic Market Overview")

# Market News Headlines
st.subheader("Market News Headlines")
headlines = fetch_yahoo_finance_news()
for headline in headlines:
    st.write(f"- {headline}")

# Dynamic Yield Curve
st.subheader("Dynamic Yield Curve")
st.write("Dynamic Yield Curve chart will go here.")
# Here you can use st.pyplot() to display a Matplotlib plot for yield curves

# Key Market Rates
st.subheader("Key Market Rates")
st.write("Key rates like SONIA, SOFR, and yields for GILTS, and UST will go here.")
# You can use st.table() or st.dataframe() to display the key market rates

# Key Equities Overview
st.subheader("Key Equities Overview")
st.write("Overview of key equities like FTSE 100, S&P 500, and Nikkei 225 will go here.")
# Again, st.table() or st.dataframe() can be used to display this data

# Economic Calendar
st.subheader("Economic Calendar")
iframe_code = '''
<iframe src="https://sslecal2.investing.com?columns=exc_flags,exc_currency,exc_importance,exc_actual,exc_forecast,exc_previous&features=datepicker,timezone&countries=25,32,6,37,72,22,17,39,14,10,35,43,56,36,110,11,26,12,4,5&calType=week&timeZone=15&lang=1" width="650" height="467" frameborder="0" allowtransparency="true" marginwidth="0" marginheight="0"></iframe>
'''
components.v1.html(iframe_code, height=500)
